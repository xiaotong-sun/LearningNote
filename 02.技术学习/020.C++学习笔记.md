# C++基础入门

## 1.基本语法

### 1.1 基本结构

```c++
#include <iostream>
using namespace std;

int main() {
    cout << "hello world" << endl;
    return 0;
}
```



### 1.2 注释

```c++
// 1. 单行注释

/*
   2. 多行注释
   2. 多行注释
*/
```



### 1.3 变量

**作用：** 给一段指定的内存空间起名，从而方便操作这段内存空间

**语法：** `数据类型 变量名 = 变量初始值;`

**示例：** `int a = 10;`



**变量命名规则：**

- 标识符不能是关键字
- 标识符只能由数字、字母、下划线组成
- 标识符只能由字母、下划线开头
- 标识符区分大小写



### 1.4 常量

**作用：** 用于记录程序中不可更改的数据

**语法：** `#define 常量名 常量值` 或 `const 数据类型 常量名 = 常量值`

**示例：** `#defint day 7` 或 `const int day = 7`



### 1.5 数据类型

#### 整型

| 数据类型  |                     占用空间                     |              取值范围              |
| :-------: | :----------------------------------------------: | :--------------------------------: |
|   short   |                      2Byte                       | -2<sup>15</sup> ~ 2<sup>15</sup>-1 |
|    int    |                      4Byte                       | -2<sup>31</sup> ~ 2<sup>31</sup>-1 |
|   long    | Windows为4Byte， Linux为4Byte(32位)，8Byte(64位) | -2<sup>31</sup> ~ 2<sup>31</sup>-1 |
| long long |                      8Byte                       | -2<sup>63</sup> ~ 2<sup>63</sup>-1 |



#### 实型（浮点型）

| 数据类型 | 占用空间 | 取值范围        |
| -------- | -------- | --------------- |
| float    | 4Byte    | 7位有效数字     |
| double   | 8Byte    | 15~16位有效数字 |

浮点数可以使用科学计数法表示，例如:`3.2e-3`



#### 字符型

**语法：** `char ch = 'a';`

- C和C++中字符类型的变量只占用一个字节
- 字符型变量存储的并非是该字符，而是该字符的ASCII编码



#### 字符串类型

**语法：** `string 变量名 = "字符串值"` 或 `char str[] = "字符串值"`

【注意】：C++风格字符串(前一种)，需要加入头文件`#include<string>`， string类型占用32个字节，字符数组的形式由字符串长度决定内存大小



#### 布尔类型

- true，本质为1
- false，本质为0
- 占用1个字节

`bool flag = true`, `bool flag = false`



#### sizeof关键字

**作用：** 统计数据类型所占用的内存空间大小，单位为==字节==

**语法：** `sizeof(数据类型\变量)`

**示例：** `sizeof(int)`, `sizeof(name)`



### 1.6 输入和输出

**数据输入：** `cin >> 变量;`

**数据输出：** `cout << 数据 << endl;`



### 1.7 数组

#### 一维数组

- `数据类型 数组名[数组长度];`
- `数据类型 数组名[数组长度] = {1,2,3,4,....};`
- `数据类型 数组名[] = {1,2,3,4};`



#### 二位数组

- `数据类型 数组名[行数][列数];`
- `数据类型 数组名[2][3] = {{1,2,3}, {4,5,6}};`
- `数据类型 数组名[2][3] = {1,2,3,4,5,6};`
- `数据类型 数组名[][3] = {1,2,3,4,5,6};`



## 2.程序流程结构

### 2.1 goto语句

**作用：** 无条件跳转语句

**语法：** `goto 标记；`

**解释：** 如果标记名称存在，则跳转到该标记位置继续执行

**示例:**

```C++
int main() {
    cout << "1" << endl;
    
    goto FLAG;
    
    cout << "2" << endl;
    cout << "3" << endl;
    
    FLAG:
    
    cout << "4" << endl;
    cout << "5" << endl;
    
    return 0;
}
```



## 3.函数

### 3.1 函数的定义

函数的定义一般分为五个步骤：

1. 返回值类型
2. 函数名
3. 参数列表
4. 函数体
5. return表达式

**语法：**

```c++
返回值类型 函数名(参数列表) {
    
    函数体;
    
    return 表达式；
}
```



### 3.2 函数的声明

**语法：** `返回值类型 函数名(参数列表);`

函数的声明可以有多次，但函数的定义只能有一次。

如果函数在main()函数后面被定义，那么必须在main()函数前面进行函数的声明。



### 3.3 函数的分文件编写

**作用：** 让代码结构更加清晰

**步骤：**

1. 创建后缀名为`.h`的头文件
2. 创建后缀名为`.cpp`的源文件
3. 在`.h`文件中写函数的声明
4. 在`.cpp`文件中写函数的定义

```c++
// swap.h文件
#include <iostream>
using namespace std;

void swap(int a, int b); // 放置函数声明

---------------------------------------
// swap.cpp文件
#include "swap.h"

void swap(int a, int b) { // 放置函数定义
    int temp = a;
    a = b;
    b = temp;
    cout << "a = " << a << endl;
    cout << "b = " << b << endl;
}
```



## 4.指针

### 4.1 指针的概念

**指针的作用：** 可以通过指针间接的访问内存



### 4.2 指针的定义及使用

**语法：** `数据类型* 指针变量名;`

**例子：** `int* p;`

可以通过取地址符来对指针进行赋值，例如：`int* p = &a;`

为了避免出现==野指针==的情况，通常在声明指针的时候赋值为NULL,从而将指针指向内存空间编号为0的空间:`int* p = NULL;`。注意，内存空间编号为0~255为系统占用内存，不允许用户访问。



> 野指针：指针变量指向非法的内存空间
>
> 示例：
>
> ```c++
> int mai() {
>     // 指针变量p指向内存地址编号为0x1100的空间
>     int *p = (int *) 0x1100;
>     
>     // 访问野指针报错
>     cout << *p << endl;
>     return 0;
> }
> ```
>
> 总结：空指针和野指针都不是我们申请的内存空间，因此不要访问。



### 4.3 指针所占的内存空间大小

指针存放的是16进制的地址，在32位系统中，指针所占用的内存大小为4Byte，不管是什么数据类型；在64位系统中为8Byte。



### 4.4 const修饰指针⭐

**const修饰指针的三种情况**

- const修饰指针 --> 常量指针（指向常量的指针）
    - `const int* p = &a;`
    - 指针的指向可以修改，但是指针指向的值不可以修改
- const修饰常量 --> 指针常量（指针类型的常量）
    - `int* const p = &a;`
    - 指针的指向不可以修改，但是指针指向的值可以修改
- const既修饰指针又修饰常量
    - `const int* const p = &a;`
    - 指针的指向和指向的值均不可以修改

```c++
#include <iostream>

using namespace std;

int main() {
    int a = 10;
    int b = 20;

    // 常量指针
    const int* p1 = &a;
    p1 = &b; // 正确
    *p1 = 30; // 错误

    // 指针常量
    int* const p2 = &a;
    *p2 = 30; // 正确
    p2 = &b; // 错误
	
    // const既修饰常量又修饰指针
    const int* const p3 = &a;
    p3 = &b; // 错误
    *p3 = 40; // 错误
}
```



### 4.5 指针和数组

**作用：** 利用指针访问数组元素

```c++
#include <iostream>

using namespace std;

int main() {
    int arr[10] = {1,2,3,4,5,6,7,8,9,10};

    int* p = arr;

    // 利用指针遍历数组
    for (int i = 0; i < 10; ++i) {
        cout << *(p ++) << endl;
    }

    return 0;
}
```



### 4.6 指针和函数

**作用：** 利用指针作为函数参数，可以修改实参的值。

```c++
#include <iostream>

using namespace std;

void swap(int* a, int* b) {
    int temp = *a;
    *a = *b;
    *b = temp;
}

int main() {
    int a = 10;
    int b = 20;

    swap(&a, &b);

    cout << "a:" <<  a << "\nb:" << b << endl;

    return 0;
}
```



### 4.7 指针、数组、函数

**案例描述：** 封装一个函数，利用==冒泡排序==，实现对整数数组的升序排序。

```c++
#include <iostream>

using namespace std;

void swap(int* a, int* b) {
    int temp = *a;
    *a = *b;
    *b = temp;
}

void bubbleSort(int* arr, int len) {
    for (int i = 0; i < len - 1; i ++) {
        for (int j = 0; j < len - i - 1; j ++) {
            if (arr[j] > arr[j + 1]) {
                swap(&arr[j], &arr[j + 1]);
            }
        }
    }
}

int main() {
    int arr[10] = {4,3,6,9,1,2,10,8,7,5};
    int len = sizeof(arr) / sizeof(int);

    bubbleSort(arr, len);

    for (int i = 0; i < len; ++i) {
        cout << arr[i] << endl;
    }
}
```



## 5.结构体

### 5.1 结构体基本概念

结构体属于用户自定义的数据结构，允许用户存储不同的数据类型。



### 5.2 结构体的定义和使用

**语法：** `struct 结构体名 {结构体成员列表};` (struct不可省略)

通过结构体创建变量的方式有三种：

- `struct 结构体名 变量名;` （struct可以省略）
- `struct 结构体名 变量名 = {值1，值2...};` （struct可以省略）
- 定义结构体时顺便创建变量。



```c++
struct Student {
    string name;
    int age;
    int score;
};

int main() {
    // 第一种方式
    struct Student s1; 
    /* 或者 Student s1; */
    s1.name = "Amy";
    s1.age = 20;
    s1.score = 100;
    
    // 第二种方式
    struct Student s2 = {"Jam", 19, 99};
    
    // 第三种方式
    /*
    	struct Student {
    		string name;
    		int age;
    		int score;
    	} s3;
    */
}
```



### 5.3 结构体数组

**作用：** 将自定义结构体放到数组中方便维护

**定义：** `struct 结构体名 数组名[元素个数] = {{},{},{},...};`

```c++
#include <iostream>

using namespace std;

struct Student {
    string name;
    int age = 0;
    int score = 0;
};

int main() {
    Student stu[3] = {
            {"amy", 20, 100},
            {"jam", 20, 99},
            {"jack", 19, 89}
    };
    stu[1].name = "tom";

    for(Student s : stu) {
        cout << s.name << "--" << s.age << "--" << s.score << endl;
    }
}
```



### 5.4 结构体指针

**作用：** 通过指针访问结构体中的成员

- 利用操作符`->`可以通过结构体指针访问结构体属性

```c++
#include <iostream>

using namespace std;

struct Student {
    string name;
    int age = 0;
    int score = 0;
};

int main() {
    Student s1 = {"tom", 20, 200};
    Student *p = &s1;
    cout << p->name << "--" << p->age << "--" << p->score << endl;
}
```



### 5.5 结构体嵌套结构体

**作用:** 结构体中的成员可以是另一个结构体

**示例：**

```c++
struct Student {
    string name;
    int age = 0;
    int score = 0;
};

struct Teacher {
    int id = 0;
    string name;
    int age = 0;
    struct Student stu[20]; 
};
```



### 5.6 结构体作函数参数

**作用：** 将结构体作为参数向函数中传递

传递方式有两种：

- 值传递
- 地址传递

**示例：**

```c++
#include <iostream>

using namespace std;

struct Student {
    string name;
    int age = 0;
    int score = 0;
};

// 值传递
void printStudent(struct Student s) {
    s.age = 100;
    cout << s.name << "--" << s.age << "--" << s.score << endl;
}

// 地址传递
void printStudent2(struct Student *s) {
    s->age = 100;
    cout << s->name << "--" << s->age << "--" << s->score << endl;
}

int main() {
    struct Student s;
    s.name = "sam";
    s.age = 10;
    s.score = 90;

    printStudent(s);
    cout << s.name << "--" << s.age << "--" << s.score << endl;
    printStudent2(&s);
    cout << s.name << "--" << s.age << "--" << s.score << endl;
}
```

> 如果不想修改主函数中的数据，用值传递，反之用地址传递。



### 5.7 结构体中const使用场景

**作用：** 用const防止误操作

**示例：**

```c++
#include <iostream>

using namespace std;

struct Student {
    string name;
    int age = 0;
    int score = 0;
};

// 将函数中的形参改为指针，可以减少内存空间，而且不会复制新的副本出来
// 但此时为了避免误修改，需要加const修饰；
void printStudent(const struct Student *s) {
    cout << s->name << "--" << s->age << "--" << s->score << endl;
}

int main() {
    struct Student s;
    s.name = "sam";
    s.age = 10;
    s.score = 90;

    printStudent(&s);
    cout << s.name << "--" << s.age << "--" << s.score << endl;
}
```

